<?xml version="1.0"?>
<dtos
	xmlns="cakephp-dto"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="cakephp-dto https://github.com/dereuromark/cakephp-dto">

	<!-- User DTO with BelongsTo Role -->
	<dto name="UserProjection" immutable="true">
		<field name="id" type="int"/>
		<field name="username" type="string"/>
		<field name="email" type="string"/>
		<field name="role" type="RoleProjection"/>
		<field name="created" type="\Cake\I18n\DateTime"/>
	</dto>

	<!-- Role DTO with HasMany Users -->
	<dto name="RoleProjection" immutable="true">
		<field name="id" type="int"/>
		<field name="name" type="string"/>
		<field name="users" type="UserSimpleProjection[]" collectionType="array"/>
	</dto>

	<!-- Simple User DTO (without role to avoid circular reference) -->
	<dto name="UserSimpleProjection" immutable="true">
		<field name="id" type="int"/>
		<field name="username" type="string"/>
		<field name="email" type="string"/>
	</dto>

	<!-- Article DTO for benchmark comparison -->
	<dto name="ArticleBenchmark" immutable="true">
		<field name="id" type="int"/>
		<field name="title" type="string"/>
		<field name="body" type="string"/>
		<field name="author" type="AuthorBenchmark"/>
		<field name="comments" type="CommentBenchmark[]" collectionType="array"/>
	</dto>

	<!-- Author DTO for benchmark -->
	<dto name="AuthorBenchmark" immutable="true">
		<field name="id" type="int"/>
		<field name="name" type="string"/>
	</dto>

	<!-- Comment DTO for benchmark -->
	<dto name="CommentBenchmark" immutable="true">
		<field name="id" type="int"/>
		<field name="comment" type="string"/>
		<field name="articleId" type="int"/>
		<field name="userId" type="int"/>
	</dto>

	<!-- Simple User DTO with BelongsTo Role -->
	<dto name="SimpleUser" immutable="true">
		<field name="id" type="int"/>
		<field name="username" type="string"/>
		<field name="email" type="string"/>
		<field name="role" type="SimpleRoleBasic"/>
		<field name="created" type="\Cake\I18n\DateTime"/>
	</dto>

	<!-- Simple Role DTO with HasMany Users -->
	<dto name="SimpleRole" immutable="true">
		<field name="id" type="int"/>
		<field name="name" type="string"/>
		<field name="users" type="SimpleUserBasic[]" collectionType="array"/>
	</dto>

	<!-- Basic role without back-reference -->
	<dto name="SimpleRoleBasic" immutable="true">
		<field name="id" type="int"/>
		<field name="name" type="string"/>
	</dto>

	<!-- Basic user without back-reference -->
	<dto name="SimpleUserBasic" immutable="true">
		<field name="id" type="int"/>
		<field name="username" type="string"/>
		<field name="email" type="string"/>
	</dto>

	<!-- Post DTO with BelongsToMany Tags -->
	<dto name="Post" immutable="true">
		<field name="id" type="int"/>
		<field name="title" type="string"/>
		<field name="content" type="string"/>
		<field name="slug" type="string"/>
		<field name="tags" type="Tag[]" collectionType="array"/>
	</dto>

	<!-- Tag DTO with _joinData from pivot table -->
	<dto name="Tag" immutable="true">
		<field name="id" type="int"/>
		<field name="label" type="string"/>
		<field name="slug" type="string"/>
		<field name="counter" type="int"/>
		<field name="_joinData" type="Tagged"/>
	</dto>

	<!-- Tagged pivot table DTO -->
	<dto name="Tagged" immutable="true">
		<field name="id" type="int"/>
		<field name="tagId" type="int"/>
		<field name="fkId" type="int"/>
		<field name="fkModel" type="string"/>
		<field name="created" type="\Cake\I18n\DateTime"/>
	</dto>

	<!-- User DTO with _matchingData as array -->
	<dto name="UserWithMatching" immutable="true">
		<field name="id" type="int"/>
		<field name="username" type="string"/>
		<field name="email" type="string"/>
		<field name="created" type="\Cake\I18n\DateTime"/>
		<field name="_matchingData" type="array"/>
	</dto>

	<!-- User DTO with typed _matchingData -->
	<dto name="UserWithMatchingTyped" immutable="true">
		<field name="id" type="int"/>
		<field name="username" type="string"/>
		<field name="email" type="string"/>
		<field name="created" type="\Cake\I18n\DateTime"/>
		<field name="_matchingData" type="MatchingData"/>
	</dto>

	<!-- MatchingData structure -->
	<dto name="MatchingData" immutable="true">
		<field name="Roles" type="SimpleRoleBasic"/>
	</dto>

</dtos>
